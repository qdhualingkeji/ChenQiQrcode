!function(i,e){function n(i,e,n){for(var o in e)!e.hasOwnProperty(o)||i.hasOwnProperty(o)&&!n||(i[o]=e[o])}var o=function(i){this.options={is_nencao:1,is_preview:0,is_scene_detail:1},n(this.options,i,!0),this.BtnSuccess=this.options.createSuccess||function(){},this.BtnFail=this.options.createFail||function(){},this.createBefore=this.options.HuomaCreateBefore||function(){},this.AfterHuomaCreate=this.options.AfterHuomaCreate||function(){}};o.prototype={constructor:o,gotoCreate:function(){1==this.options.is_nencao?this.CopyCase():0==this.options.is_nencao&&(this.createBefore(),this.checkLoginHuoma())},needLogin:function(){var i=this;return seajs.use("//"+STATIC_SERVICE+"/js/login_plugin.js?v=20190610",function(n){n.login_plugin("login","",function(){e("#iframe").hide(),e("#login_join",window.parent.document).hide(),e("#close_login",window.parent.document).hide(),e("body",window.parent.document).removeClass("modal-active"),e("#login",window.parent.document).hide(),e("#myqr_out",window.parent.document).show(),i.CopyCase(i)},1,"")}),!1},CopyCase:function(){var i=t.isOpenNewWin(this),n=this,o=this.options.is_scene_detail,s=2;s=1==o?26:27,e.ajax({type:"GET",url:"/apis/QrcodeCase/copyV2",data:{btn_id:this.options.data_Id,preview:this.options.is_preview,scene_id:this.options.scene_id,create_from:s},dataType:"json",success:function(e){1==e.status?(n.BtnSuccess.call(this,e),i?i.location.href=e.data.edit_link:window.location.href=e.data.edit_link):2==e.status?n.needLogin(n):(alert(e.info,"danger"),n.BtnFail.call(this,e))}})},CopyCaseHuoma:function(){var i=t.isOpenNewWin(this),n=this,o=this.options.is_scene_detail,s=4;0==o&&(s=23),e.ajax({type:"GET",url:"/apis/QrcodeCase/copy",data:{case_id:this.options.data_Id,from_id:4,add_from:s,front_add:23},dataType:"json",success:function(e){n.AfterHuomaCreate.call(this,e),1==e.status?i?i.location.href=e.data.edit_link:window.location.href=e.data.edit_link:alert(e.info,"danger")}})},checkLoginHuoma:function(){var i=this;return 0==this.options.is_login?(e("#modal-intro").modal("hide"),seajs.use("//"+STATIC_SERVICE+"/js/login_plugin.js?v=20190610",function(n){n.login_plugin("login","",function(){e("#iframe").hide(),e("#login_join",window.parent.document).hide(),e("#close_login",window.parent.document).hide(),e("body",window.parent.document).removeClass("modal-active"),e("#login",window.parent.document).hide(),e("#myqr_out",window.parent.document).show(),i.CopyCaseHuoma(i)},1,"")}),!1):void this.CopyCaseHuoma()}};var t={getDomain:function(){var i,e,n,o,t=window.location.href;if(t.indexOf("cli.me")>-1)var e="user.cli.me",i="cli.me",n="static.cli.me/cli",o="console.cli.me:8000";else if(t.indexOf("cliim.net")>-1)var e="user.cliim.net",i="cliim.net",n="static-develop.clewm.net/cli",o="console.cliim.net";else if(t.indexOf("cliim.com")>-1)var e="user.cliim.com",i="cliim.com",n="static-test.clewm.net/cli",o="console.cliim.com";else if(t.indexOf("cli.im")>-1)var e="user.cli.im",i="cli.im",n="static.clewm.net/cli",o="console.cli.im";else var e="user.cli.im",i="cli.im",n="static.clewm.net/cli",o="console.cli.im";return{CLI_DOMAIN:i,USER_DOMAIN:e,STATIC_SERVICE:n,CONSOLE_DOAMIN:o}},NeedLoginTpl:function(i,e){return 7==i||8==i||9==i||0==e.options.is_nencao?!0:!1},isOpenNewWin:function(i){var e,n=t.NeedLoginTpl(i.options.type,i);return n&&1!=i.options.is_login||(e=window.open("about:blank"),e&&(7!=i.options.type&&e.document.write("创建中..."),e.document.title="创建中...")),e}};i.CreateQuickCodeById=o}(this,this.jQuery);